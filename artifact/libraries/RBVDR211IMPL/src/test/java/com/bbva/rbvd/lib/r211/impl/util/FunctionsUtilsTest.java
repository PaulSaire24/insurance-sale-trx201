package com.bbva.rbvd.lib.r211.impl.util;

import com.bbva.apx.exception.business.BusinessException;
import com.bbva.rbvd.dto.insurancemissionsale.constans.RBVDInternalErrors;
import org.junit.Test;
import org.mockito.Mockito;
import org.slf4j.Logger;

import java.util.HashMap;
import java.util.Map;
import java.util.Optional;

import static org.junit.Assert.*;

public class FunctionsUtilsTest {

    @Test
    public void loggerAutomaticTest() {
        String message = "1nsuranceSimulationDTO{holder=HolderDTO{id='97161047', fullName='null', identityDocument=IdentityDocumentDTO{documentType=DocumentTypeDTO{id='DNI', name='null', description='null'}, documentNumber='45920344', number='null'}, contactDetails=null}, product=InsuranceProductDTO{id='830', name='SEGURO VEHICULAR BBVA', description='null', plans=[InsuranceProductModalityDTO{id='01', name='PLAN BÁSICO', isSelected='null', isRecommended='N', installmentPlan=InstallmentModalityDTO{period=PaymentPeriodDTOCommonDTO{id='MONTHLY', name='Mensual', isPrincipal=null, isSelected=null, coverageCategory=null, number='null', description='null', unit=null, coverageType=null, coverageGroup=null, coverageFees=null}, amount=InsurancePrimeAmountDTO{amount='604.42', currency='USD'}, notAdjustedAmount=null, financing=InsuranceFinancingDTO{id=123, paymentsTotalnumber=12, startDate='Thu Sep 21 19:00:00 PET 2023', maturityDate='Sat Sep 21 19:00:00 PET 2024', installments=[InstallmentsSimulationDTO{paymentNumber=1', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Thu Sep 21 19:00:00 PET 2023'}, InstallmentsSimulationDTO{paymentNumber=2', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Sat Oct 21 19:00:00 PET 2023'}, InstallmentsSimulationDTO{paymentNumber=3', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Tue Nov 21 19:00:00 PET 2023'}, InstallmentsSimulationDTO{paymentNumber=4', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Thu Dec 21 19:00:00 PET 2023'}, InstallmentsSimulationDTO{paymentNumber=5', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Sun Jan 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=6', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Wed Feb 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=7', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Thu Mar 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=8', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Sun Apr 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=9', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Tue May 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=10', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Fri Jun 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=11', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Sun Jul 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=12', amount=BillAmountDTO{amount='52.76', currency='USD'}', period=null', maturityDate='Wed Aug 21 19:00:00 PET 2024'}]}, flexibilityIndicator=false}, coverages=[CoverageModalityDTO{CommonDTO{id='1001', name='Robo total de tu vehículo, hasta por el valor asegurado.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, CoverageModalityDTO{CommonDTO{id='1002', name='Daños a terceros, hasta por US$20,000.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, CoverageModalityDTO{CommonDTO{id='1003', name='Reposición de lunas nacionales sin deducible.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, CoverageModalityDTO{CommonDTO{id='1', name='Robo total de tu vehículo, hasta por el valor asegurado.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, CoverageModalityDTO{CommonDTO{id='2', name='Daños a terceros, hasta por US$20,000.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, CoverageModalityDTO{CommonDTO{id='3', name='Reposición de lunas nacionales sin deducible.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}], benefits=[BenefitModalityDTO{CommonDTO{id='1', name='Auxilio mecánico (cambio de llantas, paso de corriente, entre otros).', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, BenefitModalityDTO{CommonDTO{id='2', name='Traslado en grúa.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, BenefitModalityDTO{CommonDTO{id='3', name='Descuentos en Repsol y Baterías Etna Express.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}], exclusions=[ExclusionDTO{CommonDTO{id='1', name='Uso  indebido del vehículo asegurado y/o sobrecarga del mismo', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='2', name='No llevar puesto el cinturón de seguridad', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='3', name='Circulando por vías o lugares no autorizados para el tránsito', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='4', name='Podrás encontrar el  listado completo de las exclusiones en nuestra página web, en la sección de Seguros.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='1001', name='Ómnibus y camiones', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='1002', name='Vehículos menores (motocicletas, mototaxis y similares)', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='1003', name='Vehículos de timón cambiado', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='1004', name='Podrás encontrar el listado completo de vehículos no asegurables en nuestra página web, en la sección de Seguros.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}], deductibles=[DeductibleDTO{CommonDTO{id='1', name='Daño Propio - Pérdida total por Robo total, pagarás el 15% del importe del siniestro (siendo el monto mínimo a pagar US$150).', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=null, coverageType=null, coverageGroup=null, coverageFees=null}}, DeductibleDTO{CommonDTO{id='2', name='Responsabilidad civil frente a terceros por accidente de tránsito pagarás el 15% del importe del siniestro (siendo el monto mínimo a pagar US$150).', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=null, coverageType=null, coverageGroup=null, coverageFees=null}}], isSelectBoolean='null', isRecommendBoolean='null'}, InsuranceProductModalityDTO{id='02', name='PLAN ESTÁNDAR', isSelected='null', isRecommended='N', installmentPlan=InstallmentModalityDTO{period=PaymentPeriodDTOCommonDTO{id='MONTHLY', name='Mensual', isPrincipal=null, isSelected=null, coverageCategory=null, number='null', description='null', unit=null, coverageType=null, coverageGroup=null, coverageFees=null}, amount=InsurancePrimeAmountDTO{amount='841.33', currency='USD'}, notAdjustedAmount=null, financing=InsuranceFinancingDTO{id=123, paymentsTotalnumber=12, startDate='Thu Sep 21 19:00:00 PET 2023',"
                + "1nsuranceSimulationDTO{holder=HolderDTO{id='97161047', fullName='null', identityDocument=IdentityDocumentDTO{documentType=DocumentTypeDTO{id='DNI', name='null', description='null'}, documentNumber='45920344', number='null'}, contactDetails=null}, product=InsuranceProductDTO{id='830', name='SEGURO VEHICULAR BBVA', description='null', plans=[InsuranceProductModalityDTO{id='01', name='PLAN BÁSICO', isSelected='null', isRecommended='N', installmentPlan=InstallmentModalityDTO{period=PaymentPeriodDTOCommonDTO{id='MONTHLY', name='Mensual', isPrincipal=null, isSelected=null, coverageCategory=null, number='null', description='null', unit=null, coverageType=null, coverageGroup=null, coverageFees=null}, amount=InsurancePrimeAmountDTO{amount='604.42', currency='USD'}, notAdjustedAmount=null, financing=InsuranceFinancingDTO{id=123, paymentsTotalnumber=12, startDate='Thu Sep 21 19:00:00 PET 2023', maturityDate='Sat Sep 21 19:00:00 PET 2024', installments=[InstallmentsSimulationDTO{paymentNumber=1', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Thu Sep 21 19:00:00 PET 2023'}, InstallmentsSimulationDTO{paymentNumber=2', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Sat Oct 21 19:00:00 PET 2023'}, InstallmentsSimulationDTO{paymentNumber=3', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Tue Nov 21 19:00:00 PET 2023'}, InstallmentsSimulationDTO{paymentNumber=4', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Thu Dec 21 19:00:00 PET 2023'}, InstallmentsSimulationDTO{paymentNumber=5', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Sun Jan 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=6', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Wed Feb 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=7', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Thu Mar 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=8', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Sun Apr 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=9', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Tue May 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=10', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Fri Jun 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=11', amount=BillAmountDTO{amount='52.78', currency='USD'}', period=null', maturityDate='Sun Jul 21 19:00:00 PET 2024'}, InstallmentsSimulationDTO{paymentNumber=12', amount=BillAmountDTO{amount='52.76', currency='USD'}', period=null', maturityDate='Wed Aug 21 19:00:00 PET 2024'}]}, flexibilityIndicator=false}, coverages=[CoverageModalityDTO{CommonDTO{id='1001', name='Robo total de tu vehículo, hasta por el valor asegurado.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, CoverageModalityDTO{CommonDTO{id='1002', name='Daños a terceros, hasta por US$20,000.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, CoverageModalityDTO{CommonDTO{id='1003', name='Reposición de lunas nacionales sin deducible.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, CoverageModalityDTO{CommonDTO{id='1', name='Robo total de tu vehículo, hasta por el valor asegurado.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, CoverageModalityDTO{CommonDTO{id='2', name='Daños a terceros, hasta por US$20,000.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, CoverageModalityDTO{CommonDTO{id='3', name='Reposición de lunas nacionales sin deducible.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}], benefits=[BenefitModalityDTO{CommonDTO{id='1', name='Auxilio mecánico (cambio de llantas, paso de corriente, entre otros).', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, BenefitModalityDTO{CommonDTO{id='2', name='Traslado en grúa.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, BenefitModalityDTO{CommonDTO{id='3', name='Descuentos en Repsol y Baterías Etna Express.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}], exclusions=[ExclusionDTO{CommonDTO{id='1', name='Uso  indebido del vehículo asegurado y/o sobrecarga del mismo', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='2', name='No llevar puesto el cinturón de seguridad', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='3', name='Circulando por vías o lugares no autorizados para el tránsito', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='4', name='Podrás encontrar el  listado completo de las exclusiones en nuestra página web, en la sección de Seguros.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='1001', name='Ómnibus y camiones', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='1002', name='Vehículos menores (motocicletas, mototaxis y similares)', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='1003', name='Vehículos de timón cambiado', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}, ExclusionDTO{CommonDTO{id='1004', name='Podrás encontrar el listado completo de vehículos no asegurables en nuestra página web, en la sección de Seguros.', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=UnitDTO{unitType='AMOUNT', amount=0.0, currency='', percentage=0.0, text='', decimal=0.0}, coverageType=null, coverageGroup=null, coverageFees=null}}], deductibles=[DeductibleDTO{CommonDTO{id='1', name='Daño Propio - Pérdida total por Robo total, pagarás el 15% del importe del siniestro (siendo el monto mínimo a pagar US$150).', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=null, coverageType=null, coverageGroup=null, coverageFees=null}}, DeductibleDTO{CommonDTO{id='2', name='Responsabilidad civil frente a terceros por accidente de tránsito pagarás el 15% del importe del siniestro (siendo el monto mínimo a pagar US$150).', isPrincipal=true, isSelected=null, coverageCategory=null, number='null', description='null', unit=null, coverageType=null, coverageGroup=null, coverageFees=null}}], isSelectBoolean='null', isRecommendBoolean='null'}, InsuranceProductModalityDTO{id='02', name='PLAN ESTÁNDAR', isSelected='null', isRecommended='N', installmentPlan=InstallmentModalityDTO{period=PaymentPeriodDTOCommonDTO{id='MONTHLY', name='Mensual', isPrincipal=null, isSelected=null, coverageCategory=null, number='null', description='null', unit=null, coverageType=null, coverageGroup=null, coverageFees=null}, amount=InsurancePrimeAmountDTO{amount='841.33', currency='USD'}, notAdjustedAmount=null, financing=InsuranceFinancingDTO{id=123, paymentsTotalnumber=12, startDate='Thu Sep 21 19:00:00 PET 2023',";
        Logger LOGGER = Mockito.mock(Logger.class);
        FunctionsUtils.loggerAutomatic("[***] Response Simulation {}",message,LOGGER);
        Mockito.verify(LOGGER,Mockito.times(2)).info(Mockito.anyString(),Mockito.anyString());

    }
    @Test
    public void isValidateRangeReturnsTrueWhenValueIsWithinRange() {
        assertTrue(FunctionsUtils.isValidateRange(5, 1, 10));
    }

    @Test
    public void isValidateRangeReturnsFalseWhenValueIsBelowRange() {
        assertFalse(FunctionsUtils.isValidateRange(0, 1, 10));
    }

    @Test
    public void isValidateRangeReturnsFalseWhenValueIsAboveRange() {
        assertFalse(FunctionsUtils.isValidateRange(11, 1, 10));
    }

    @Test
    public void isValidateRangeReturnsTrueWhenValueIsEqualToMinRange() {
        assertTrue(FunctionsUtils.isValidateRange(1, 1, 10));
    }

    @Test
    public void isValidateRangeReturnsTrueWhenValueIsEqualToMaxRange() {
        assertTrue(FunctionsUtils.isValidateRange(10, 1, 10));
    }

    @Test
    public void validateMapReturnsOptionalOfMapWhenMapIsNotEmpty() {
        Map<String, String> testMap = new HashMap<>();
        testMap.put("key", "value");

        Optional<Map<String, String>> result = FunctionsUtils.validateMap(testMap);

        assertTrue(result.isPresent());
        assertEquals(testMap, result.get());
    }

    @Test
    public void validateMapReturnsEmptyOptionalWhenMapIsEmpty() {
        Map<String, String> testMap = new HashMap<>();

        Optional<Map<String, String>> result = FunctionsUtils.validateMap(testMap);

        assertFalse(result.isPresent());
    }

    @Test
    public void validateMapReturnsEmptyOptionalWhenMapIsNull() {
        Map<String, String> testMap = null;

        Optional<Map<String, String>> result = FunctionsUtils.validateMap(testMap);

        assertFalse(result.isPresent());
    }

    @Test
    public void buildValidationReturnsBusinessExceptionWithCorrectValues() {
        RBVDInternalErrors error = RBVDInternalErrors.ERROR_EMPTY_RESULT_QUOTATION_DATA;
        BusinessException result = FunctionsUtils.buildValidation(error);

        assertEquals(error.getAdviceCode(), result.getAdviceCode());
        assertEquals(error.isRollback(), result.isHasRollback());
        assertEquals(error.getMessage(), result.getMessage());
    }
}